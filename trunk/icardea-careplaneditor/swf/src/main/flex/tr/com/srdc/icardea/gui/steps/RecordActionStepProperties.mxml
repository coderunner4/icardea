<?xml version="1.0" encoding="utf-8"?>
  <!--
  ~ ////////////////////////////////////////////////////////////////////////////////
  ~ //
  ~ //  Kap IT  -  Copyright 2009 Kap IT  -  All Rights Reserved.  
  ~ //   
  ~ //  TERMS OF USE  
  ~ //  Developers who wish to access source code must agree to the License that accompanies the code
  ~ //  (see file “License.txt” contained in the archive, or http://lab.kapit.fr/display/Store/Licenses)
  ~ //  If you use the source code, you accept to be bound by the License.  If you do not accept the License, do not use the source code.  
  ~ //  Licensees may use the source code to assist with the development of related software. Licensees may not modify or redistribute the source code.  
  ~ //
  ~ ////////////////////////////////////////////////////////////////////////////////
  -->
<!--
  ~ ////////////////////////////////////////////////////////////////////////////////
  ~ // This tool can be used to change diagrammer mode (link creation, hand or selection mode)
  ~ // It also reflect change to diagrammer mode, should this change be cause by this tool  
  ~ // or an external cause.
  ~ ////////////////////////////////////////////////////////////////////////////////
 -->
<mx:TitleWindow xmlns:mx="http://www.adobe.com/2006/mxml" title="Variable Properties" height="526" width="388" >
    <mx:Script>
		<![CDATA[
			import tr.com.srdc.icardea.gui.variables.DataSourcesTree;
			import tr.com.srdc.icardea.model.steps.recordAction.RecordActionStep;
			import tr.com.srdc.icardea.gui.scriptEditor.ScriptEditor;
			
		import tr.com.srdc.icardea.gui.scriptEditor.ScriptEditor;
		import tr.com.srdc.icardea.model.steps.ConsultStep;
		import net.customware.flex.util.xml.converter.ArrayConverter;
		import mx.core.Application;
		import tr.com.srdc.icardea.model.variables.Variable;
		import tr.com.srdc.icardea.model.steps.FinalStep;
		import mx.controls.Alert;
		import mx.containers.TitleWindow;
		import mx.managers.PopUpManager;
		import mx.collections.ArrayCollection;
		import com.kapit.diagram.DiagramEvent;
        import com.kapit.diagram.view.DiagramView;
       
        [Bindable]
        public var recordStep:RecordActionStep;
             	
        public function selectConcept():void
        {
        	var epopup:DataSourcesTree = new DataSourcesTree;
        	PopUpManager.addPopUp(epopup, this,true);
    	
            PopUpManager.centerPopUp(epopup);
            //epopup.treeVar = csVariable;
            
        }
        public function deleteConcept():void
        {
        	if(myGrid2.selectedItem == null)
        		Alert.show("Please select a variable to edit", "No Variable Selected");
        	if(myGrid2.selectedItem !=null)
        	{	
	        	
	        }	
        }
      
        public function save():void
        {
        	PopUpManager.removePopUp(this);
        }
       
        
        ]]>
	</mx:Script>
    
        <mx:VBox width="355" height="467">
         <mx:Spacer height="5"/>	
         <mx:HBox>
         	<mx:Label text="Name:" width="121" height="20" fontWeight="bold"/>
         	<mx:TextInput id="recordStepName" text="{recordStep.name}" height="20" width="156"/>
         </mx:HBox>
         <mx:Label text="Concept:" width="83" height="20" fontWeight="bold"/>
          <mx:HBox width="342" height="39">
           <mx:HBox>
           	<mx:Button label="Select Concept" width="135" click="{selectConcept()}" height="32"/>
           </mx:HBox>
           <mx:Button label="Delete Concept" width="135" click="{deleteConcept()}" height="32"/>
          </mx:HBox>
          <mx:DataGrid id="myGrid2" width="342" height="109" dataProvider="{this.recordStep.concept}" >
          <mx:columns>
             	<mx:DataGridColumn dataField="code" headerText="Code" />
              	<mx:DataGridColumn dataField="name" headerText="Name" />
              	<mx:DataGridColumn dataField="schemeID" headerText="Scheme ID" />
           	</mx:columns> 
          </mx:DataGrid>
          <mx:Label text="Data Source:" width="83" height="20" fontWeight="bold"/>
          <mx:DataGrid id="myGrid" width="341" height="128" dataProvider="{this.recordStep.dataSources}" >
          <mx:columns>
             	<mx:DataGridColumn dataField="code" headerText="Code" />
              	<mx:DataGridColumn dataField="name" headerText="Name" />
              	<mx:DataGridColumn dataField="attribute" headerText="Attribute" />
              	<mx:DataGridColumn dataField="schemeID" headerText="Scheme ID" />
           	</mx:columns> 
          </mx:DataGrid>
          <mx:Spacer height="10"/>
          <mx:Button label="OK" enabled="true" click="{save()}" width="114" height="29"/>
        </mx:VBox>
</mx:TitleWindow>


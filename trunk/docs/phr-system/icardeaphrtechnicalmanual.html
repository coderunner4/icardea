<html><head><title>icardea-phr-technical-manual</title><style type="text/css">ol{margin:0;padding:0}.c10{list-style-type:circle;margin:0;padding:0}.c11{list-style-type:disc;margin:0;padding:0}.c0{list-style-type:lower-roman;margin:0;padding:0}.c1{padding-left:0pt;direction:ltr;margin-left:72pt}.c17{max-width:468pt;background-color:#ffffff;padding:72pt 72pt 72pt 72pt}.c9{list-style-type:decimal;margin:0;padding:0}.c2{list-style-type:lower-latin;margin:0;padding:0}.c3{height:11pt;direction:ltr;margin-left:36pt}.c7{color:inherit;text-decoration:inherit}.c8{padding-left:0pt;margin-left:36pt}.c6{padding-left:0pt;margin-left:108pt}.c5{height:11pt}.c12{text-decoration:underline}.c13{color:#1155cc}.c15{font-size:14pt}.c14{margin-left:108pt}.c16{font-style:italic}.c4{direction:ltr}.title{padding-top:24pt;line-height:1.15;text-align:left;color:#000000;font-size:36pt;font-family:"Arial";font-weight:bold;padding-bottom:6pt}.subtitle{padding-top:18pt;line-height:1.15;text-align:left;color:#666666;font-style:italic;font-size:24pt;font-family:"Georgia";padding-bottom:4pt}p{color:#000000;font-size:11pt;margin:0;font-family:"Arial"}h1{padding-top:24pt;line-height:1.15;text-align:left;color:#000000;font-size:18pt;font-family:"Arial";font-weight:bold;padding-bottom:6pt}h2{padding-top:18pt;line-height:1.15;text-align:left;color:#000000;font-size:14pt;font-family:"Arial";font-weight:bold;padding-bottom:4pt}h3{padding-top:14pt;line-height:1.15;text-align:left;color:#666666;font-size:12pt;font-family:"Arial";font-weight:bold;padding-bottom:4pt}h4{padding-top:12pt;line-height:1.15;text-align:left;color:#666666;font-style:italic;font-size:11pt;font-family:"Arial";padding-bottom:2pt}h5{padding-top:11pt;line-height:1.15;text-align:left;color:#666666;font-size:10pt;font-family:"Arial";font-weight:bold;padding-bottom:2pt}h6{padding-top:10pt;line-height:1.15;text-align:left;color:#666666;font-style:italic;font-size:10pt;font-family:"Arial";padding-bottom:2pt}</style></head><body class="c17"><h1 class="c4"><a name="h.z6a1bl74l1lf"></a><span>PHR Technical Manual</span></h1><p class="c5 c4"><span class="c15"></span></p><h2 class="c4"><a name="h.eo6awyn3icys"></a><span>PHR Technical Requirements</span></h2><p class="c5 c4"><span></span></p><ol class="c11" start="1"><li class="c8 c4"><span>Java 1.6+</span></li><li class="c8 c4"><span>Maven 2.2.1</span></li><li class="c8 c4"><span>MongoDB running as service or started before</span></li><li class="c8 c4"><span>Tomcat 6.0.35 (install separately)</span></li></ol><ol class="c10" start="1"><li class="c1"><span>Install to d:/srfg/tomcat/XXXX. Change path in the scripts</span></li><li class="c1"><span>Currently running on port 6060</span></li><li class="c1"><span>set CATALINA_OPTS=-Xms256m -Xmx512m -XX:PermSize=256m -XX:MaxPermSize=1024m</span></li></ol><p class="c5 c4"><span></span></p><p class="c4"><span>Scripts are located under icardea home bin folder.</span></p><p class="c5 c4"><span></span></p><p class="c4"><span>Maven includes dependencies to &nbsp;other Maven components. </span></p><p class="c4"><span>It should be possible to install the web application to the common Tomcat running on port 8080, however, the maven scripts should be updated appropriately</span></p><h2 class="c4"><a name="h.nsqfnbvix1sj"></a><span>New installation or setup </span></h2><p class="c5 c4"><span></span></p><ol class="c9" start="1"><li class="c8 c4"><span>Ensure that Tomcat is installed the directory matching the property found in the phr-system-*.bat scripts (see below - PHRS_TOMCAT=D:\srfg\tomcat\phrs-tomcat-6)</span></li></ol><ol class="c2" start="1"><li class="c1"><span>Include two war files from Sesame found in the google code</span></li></ol><ol class="c0" start="1"><li class="c6 c4"><span>tools_resources/sesame-tools263.zip</span></li></ol><ol class="c9" start="2"><li class="c8 c4"><span>The following scripts can be run for a new installation and run in the following order. You might be required to interact with the scripts to simply </span><span class="c12">continue the execution</span><span>&nbsp;in the window by pressing any key.</span></li></ol><ol class="c2" start="2"><li class="c1"><span>phr-system-CLEANALL.bat</span></li><li class="c1"><span>phr-system-INSTALL.bat</span></li><li class="c1"><span>phr-system-STARTUP.bat</span></li></ol><p class="c5 c4"><span></span></p><p class="c4"><span>Notes on the scripts:</span></p><p class="c5 c4"><span></span></p><ol class="c9" start="1"><li class="c8 c4"><span>phr-system-CLEANALL.bat</span></li></ol><ol class="c2" start="1"><li class="c1"><span>Deletes the MongoDB datastore collection </span><span class="c16">phrsdata1.</span></li><li class="c1"><span>Tries to stop Tomcat, errors shown; </span><span class="c12">continue execution</span><span>&nbsp;by pressent a key.</span></li><li class="c1"><span>Check the script paths for the particular machine name (%COMPUTERNAME%) or create a new machine name</span></li></ol><ol class="c0" start="1"><li class="c6 c4"><span>set PROJECT_ROOT=D:\srdc\codes\icardea-google\icardea</span></li><li class="c6 c4"><span>set PHRS_TOMCAT=D:\srfg\tomcat\phrs-tomcat-6</span></li><li class="c6 c4"><span>set SESAME_WORKBENCH_URL =</span><span class="c12 c13"><a class="c7" href="http://localhost:6060/openrdf-workbench">http://localhost:6060/openrdf-workbench</a></span></li><li class="c6 c4"><span>&nbsp;set MONGO_TMP=C:\icardea\EHR\mongodb-win32-i386-1.8.2</span></li></ol><p class="c3"><span></span></p><ol class="c9" start="2"><li class="c8 c4"><span>phr-system-INSTALL.bat</span></li></ol><ol class="c2" start="4"><li class="c1"><span>Deletes log files.</span></li><li class="c1"><span>Runs maven clean and install.</span></li></ol><ol class="c0" start="1"><li class="c6 c4"><span>set PROJECT_ROOT=D:\srdc\codes\icardea-google\icardea</span></li><li class="c6 c4"><span>set PHRS_TOMCAT=D:\srfg\tomcat\phrs-tomcat-6</span></li><li class="c6 c4"><span>set SESAME_WORKBENCH_URL =</span><span class="c12 c13"><a class="c7" href="http://localhost:6060/openrdf-workbench">http://localhost:6060/openrdf-workbench</a></span></li><li class="c4 c6"><span>set TRIPLESTORE_SRC=generic_triplestore_http_6060.xml</span></li></ol><p class="c4 c14"><span>Note, use a different config file if using port 8080 --&gt; generic_triplestore_http_8080.xml</span></p><p class="c5 c14 c4"><span></span></p><ol class="c9" start="3"><li class="c8 c4"><span>phr-system-STARTUP.bat</span></li></ol><ol class="c2" start="6"><li class="c1"><span>Starts Tomcat and the sesame triple store. Wait for tomcat to startup. A final message indicates that the server is started. If the server is not completely finished, the next step will fail because the interoperability component depends on the running Sesame triplestore.</span></li><li class="c1"><span>After Tomcat starts, </span><span class="c12">continue execution</span><span>&nbsp;as directed. Next the Interoperability component will start in three windows (PCC-09, PCC-10, Socket Listener).</span></li></ol><ol class="c0" start="1"><li class="c6 c4"><span>set PROJECT_ROOT=D:\srdc\codes\icardea-google\icardea</span></li><li class="c6 c4"><span>set PHRS_TOMCAT=D:\srfg\tomcat\phrs-tomcat-6</span></li><li class="c6 c4"><span>set SESAME_WORKBENCH_URL =</span><span class="c12 c13"><a class="c7" href="http://localhost:6060/openrdf-workbench">http://localhost:6060/openrdf-workbench</a></span></li></ol><p class="c5 c4"><span></span></p><h2 class="c4"><a name="h.3l1zh9f8vxv9"></a><span>Interoperability Configuration</span></h2><p class="c4"><span>See the following script files to modify endpoints for the &nbsp;PHR, &nbsp;EHRIF &nbsp;(EHR Interop Framwork) or Care Planner Web services . The PHR software must be reinstalled using the PHR install script (phr-system-INSTALL.bat).</span></p><ol class="c11" start="1"><li class="c8 c4"><span>start-securepcc9-endpoint.bat &nbsp;(PCC-09 PHRS endpoints)</span></li><li class="c8 c4"><span>pcc-9.properties (EHRIF endpoint and Care Provision codes)</span></li><li class="c8 c4"><span>start-securepcc10-endpoint.bat</span></li></ol><p class="c5 c4"><span></span></p><h2 class="c4"><a name="h.symmty107vw1"></a><span>Questions:</span></h2><ol class="c9" start="1"><li class="c4 c8"><span>What if the EHRIF is reinitialized and PHR PCC-09 messages are lost, how to re-submit PCC-09 messages for each PHR patient with a known Protocol ID?</span></li></ol><p class="c5 c4"><span></span></p><p class="c5 c4"><span></span></p><h2 class="c4"><a name="h.ccu3e2oz0wub"></a><span>Restart components during pilot application</span></h2><p class="c5 c4"><span></span></p><p class="c4"><span>Close the following windows: </span></p><ol class="c9" start="1"><li class="c8 c4"><span>PCC-09 </span></li><li class="c8 c4"><span>PCC-10</span></li><li class="c8 c4"><span>Socket listener</span></li><li class="c8 c4"><span>and PHR tomcat window (contains JSF log statements) </span></li></ol><p class="c5 c4"><span></span></p><p class="c4"><span>Execute script: </span></p><ol class="c11" start="1"><li class="c8 c4"><span>phr-system-STARTUP.bat</span></li></ol><p class="c4 c5"><span></span></p><h2 class="c4"><a name="h.qiucyfk7xlz"></a><span>Content Portal</span></h2><ol class="c11" start="1"><li class="c8 c4"><span>There are two possible installations:</span></li></ol><ol class="c10" start="1"><li class="c1"><span>The content portal is installed separately at another site or it is installed locally. The Confluence portal is installed off-site. The Liferay portal can be locally installed and configured using Liferay installation instructions.</span></li></ol><ol class="c11" start="2"><li class="c8 c4"><span>For security reasons, the users should login to the portal forum with a new username. This prevents any association between the PHR user and the content portal user.</span></li></ol><h2 class="c4"><a name="h.faqxixe013ar"></a><span>Known bugs on the User Interface</span></h2><ol class="c11" start="1"><li class="c8 c4"><span>Web UI Side menu bar - </span></li></ol><ol class="c2" start="1"><li class="c1"><span>Submenu does not open and the submenu icon &ldquo;+&rdquo; is rotating indefinitely.</span></li><li class="c1"><span>Solution: Reload the page e.g. Place the mouse cursor into the web browser address box and press return; or click the browser page reload icon or select &ldquo;Home&rdquo; in the sidebar menu</span></li></ol><p class="c5 c4"><span></span></p><p class="c5 c4"><span></span></p></body></html>
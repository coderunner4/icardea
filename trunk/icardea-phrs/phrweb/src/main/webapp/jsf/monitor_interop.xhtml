<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.prime.com.tr/ui"
                template="/templates/template_ui.xhtml">

    <ui:define name="head">


        <style type="text/css">
            .table.innertable td {
                border: 0;
            }
        </style>
        <ui:insert name="head"></ui:insert>
    </ui:define>
    <!--
    <h:outputLabel value=" {theItem.label}" />
    <h:outputLabel  value=" {item.resourceType}"/>
    <h:outputLabel value=" {item.label}"/>
    <h:outputLabel  value=" {item.code}"/>
    <h:outputLabel  value=" {item.summary}"/>

    <h:outputLabel value=" {item.status}"/>
    <h:outputLabel value=" {item.statusStandard}"/>

    <h:outputLabel value=" {item.PID}"/>
    <h:outputLabel value=" {item.ownerUri}"/>

    commandImportMessages
    commandProcessIdentifier
    pixQueryIdType
    pixQueryIdUser 
    pidPix
    pidUser

    selectedResourceType
    -->

    <ui:define name="content">
        <p:fieldset legend="Import Health Data"> 
            <p>
            There might be Electronic Health Records available from your hospital.
            </p>
            <p>
            Please Provide either your CIED Implant identifier or your patient identifier. 
            Your Patient ID will be validated so that you might send and receive data from the hospital.
            The status of your identifier will be indicated below.
            </p>
            <br/>
            
            <p:messages/>
            <p:growl id="msgs" showDetail="true"/>

            <h:form>
                <h:panelGrid columns="3" border="1" style="border-style:thin solid;border-color:grey;">
       
                    <h:outputLabel value="Status of your CIED and Patient Identifiers"/>
                    <h:outputLabel value="ID Type"/>
                    <h:outputLabel value="Code"/>

                    <h:panelGroup>                      
                        <p:commandButton  ajax="false"
                                          value="Update"
                                          rendered="#{interopBean.allowCommandIdentify}"
                                          title="Submit"
                                          image="ui-icon-arrowrefresh-1-w"
                                          actionListener="#{interopBean.commandProcessIdentifier}"
                                          />
                        <h:outputLabel value="#{interopBean.statusMessagePid}"/>
                    </h:panelGroup> 

                    <h:panelGroup>                
                        <h:selectOneMenu value="#{interopBean.pixQueryIdType}"
                                         id="field_pixQueryIdType_input"
                                         rendered="#{interopBean.modify eq 'yes'}"
                                         required="true">

                            <f:selectItem itemLabel="Please Select Identifier type..." noSelectionOption="true"
                                          itemValue=""/>
                            <f:selectItem itemLabel="Implant model:Maximo"
                                          itemValue="cied:model:Maximo"/>
                            <f:selectItem itemLabel="Patient ID"
                                          itemValue="pid"/>
                        </h:selectOneMenu>

                        <p:message for="field_pixQueryIdType_input" display="text"/>
                    </h:panelGroup>


                    <h:panelGroup> 
                        <p:inputText value="#{interopBean.pixQueryIdUser}"
                                     id="field_pixQueryIdUser_input"
                                     required="true" 
                                     requiredMessage="#{labels['default_required_field']}"/>

                        <p:message for="field_pixQueryIdUser_input" display="text"/>                           
                    </h:panelGroup>




                </h:panelGrid>
            </h:form>

            <p:toolbar>
                <p:toolbarGroup align="left">
                    <h:form>


                        <p:commandButton  ajax="false"
                                          value="Import Data"
                                          image="ui-icon-disk"
                                          actionListener="#{interopBean.commandImportMessages}"
                                          />
                        Import the following health records from the Hospital
                    </h:form>       
                </p:toolbarGroup>
            </p:toolbar>

            <!-- ajax="false" removed prepend-->
            <h:form>
                <p:dataTable widgetVar="widItemTableMphr" id="idItemTableMphr"
                             var="theItem" value="#{interopBean.modelMain}">



                    <p:column headerText="Type"
                              sortBy="#{theItem.resourceType}">
                        Medication <h:outputLabel value="#{theItem.resourceType}"/>
                        <!--
                          <h:outputLabel value=" {theItem.resourceType}">
                            <f:converter converterId="labelLookup"/>
                        </h:outputLabel>
                        -->
                    </p:column>

                    <p:column headerText="Description" sortBy="#{theItem.label}">
                        <h:outputLabel value="#{theItem.label}"/>
                    </p:column>
                    <!--
                    <p:column headerText="Summary" sortBy="#{theItem.protocolId}"
                              style="width:200px;word-wrap:break-word;">

                        <h:outputText value="#{theItem.summary}"/>
                    </p:column>
                    -->
                    <!--

                            <p:column headerText="User Name" sortBy="#{theItem.label}">
                           <h:outputLabel value=" {theItem.label}" />
                           <h:outputLabel value=" {theItem.code}"/>
                           <h:outputLabel value=" {theItem.summary}"/>

                           <h:outputLabel value=" {theItem.status}"/>
                           <h:outputLabel value=" {theItem.statusStandard}"/>

                           <h:outputLabel value=" {theItem.PID}"/>
                           <h:outputLabel value=" {theItem.ownerUri}"/>
                       </p:column>
                    -->


                </p:dataTable>
            </h:form>
            <p>
                Click here to go to your  
                <u> 
                    <h:outputLink  value="#{request.contextPath}/jsf/obs_medication_mgt.xhtml"><h:outputText value="Medications List" style="font-size:10pt;"/></h:outputLink>
                </u>
            </p>
        </p:fieldset>


    </ui:define>

</ui:composition>